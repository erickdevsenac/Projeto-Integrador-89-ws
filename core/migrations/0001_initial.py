# Generated by Django 5.2.3 on 2025-10-08 19:33

import django.core.validators
import django.db.models.deletion
import django.utils.timezone
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('auth', '0012_alter_user_first_name_max_length'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Cadastro_Produto',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=225)),
                ('descriacao', models.TextField()),
                ('preco', models.DecimalField(decimal_places=2, max_digits=8)),
                ('imagem', models.ImageField(upload_to='produtos/')),
                ('destaques', models.BooleanField(default=False)),
            ],
        ),
        migrations.CreateModel(
            name='Categoria',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=100, unique=True)),
                ('slug', models.SlugField(help_text="Versão do nome amigável para URLs, ex: 'dicas-sustentaveis'", max_length=100, unique=True)),
            ],
            options={
                'verbose_name': 'Categoria',
                'verbose_name_plural': 'Categorias',
            },
        ),
        migrations.CreateModel(
            name='CategoriaDica',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=100, unique=True)),
                ('slug', models.SlugField(max_length=100, unique=True)),
            ],
            options={
                'verbose_name': 'Categoria de Dica',
                'verbose_name_plural': 'Categorias de Dicas',
            },
        ),
        migrations.CreateModel(
            name='CategoriaReceita',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=100, unique=True)),
                ('slug', models.SlugField(blank=True, max_length=100, unique=True)),
            ],
        ),
        migrations.CreateModel(
            name='Cupom',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('codigo', models.CharField(help_text='Código que o cliente irá usar (ex: PROMO10)', max_length=50, unique=True)),
                ('tipo_desconto', models.CharField(choices=[('PERCENTUAL', '% Percentual'), ('VALOR_FIXO', 'R$ Valor Fixo')], default='PERCENTUAL', max_length=20)),
                ('valor_desconto', models.DecimalField(decimal_places=2, max_digits=10)),
                ('data_validade', models.DateField(blank=True, help_text='O cupom não será válido após esta data. Deixe em branco para não expirar.', null=True)),
                ('ativo', models.BooleanField(default=True)),
                ('usos_realizados', models.PositiveIntegerField(default=0, editable=False)),
                ('limite_uso', models.PositiveIntegerField(default=1, help_text='Quantas vezes este cupom pode ser usado no total.')),
                ('valor_minimo_compra', models.DecimalField(decimal_places=2, default=0.0, max_digits=10)),
            ],
        ),
        migrations.CreateModel(
            name='EquipeDev',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=80)),
                ('foto', models.ImageField(upload_to=None)),
                ('link_git', models.URLField(blank=True, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='FaleConosco',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=100)),
                ('email', models.EmailField(max_length=254)),
                ('mensagem', models.TextField(help_text='conteudo da mensagem')),
                ('data_envio', models.DateTimeField(auto_now_add=True)),
                ('status', models.CharField(choices=[('NOVA', 'Nova'), ('RESPONDIDA', 'Respondida'), ('FECHADA', 'Fechada')], default='NOVA', max_length=10)),
            ],
        ),
        migrations.CreateModel(
            name='Pedido',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('valor_total', models.DecimalField(decimal_places=2, max_digits=10)),
                ('data_pedido', models.DateTimeField(default=django.utils.timezone.now)),
                ('endereco_entrega', models.CharField(max_length=255)),
                ('forma_pagamento', models.CharField(choices=[('CARTAO_CREDITO', 'Cartão de Crédito'), ('PIX', 'Pix'), ('CARTAO_DEBITO', 'Cartão de Débito')], default='PIX', max_length=20)),
                ('status_pagamento', models.CharField(choices=[('AGUARDANDO', 'Aguardando Pagamento'), ('PAGO', 'Pago'), ('FALHA', 'Falha no Pagamento'), ('CANCELADO', 'Cancelado')], default='AGUARDANDO', max_length=20)),
            ],
            options={
                'verbose_name': 'Pedido',
                'verbose_name_plural': 'Pedidos',
            },
        ),
        migrations.CreateModel(
            name='Perfil',
            fields=[
                ('usuario', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, primary_key=True, serialize=False, to=settings.AUTH_USER_MODEL)),
                ('tipo', models.CharField(choices=[('CLIENTE', 'Cliente'), ('VENDEDOR', 'Vendedor'), ('ONG', 'ONG')], max_length=20)),
                ('foto_perfil', models.ImageField(blank=True, null=True, upload_to='fotos_perfil/')),
                ('nome_negocio', models.CharField(blank=True, help_text='O nome comercial do vendedor ou da ONG.', max_length=255, verbose_name='Nome da Loja/Negócio')),
                ('logo_ong', models.ImageField(null=True, upload_to='')),
                ('telefone', models.CharField(max_length=15)),
                ('endereco', models.CharField(max_length=255)),
                ('cnpj', models.CharField(blank=True, help_text='Obrigatório para Vendedores e ONGs', max_length=18, null=True, unique=True, verbose_name='CNPJ')),
                ('descricao_parceiro', models.TextField(blank=True, help_text='Uma breve descrição sobre o parceiro', verbose_name='Descrição da Empresa/ONG')),
                ('imagem_carrossel1', models.ImageField(blank=True, help_text='Apenas para ONGs', null=True, upload_to='carrossel/')),
                ('imagem_carrossel2', models.ImageField(blank=True, help_text='Apenas para ONGs', null=True, upload_to='carrossel/')),
                ('imagem_carrossel3', models.ImageField(blank=True, help_text='Apenas para ONGs', null=True, upload_to='carrossel/')),
                ('objetivo', models.TextField(blank=True, help_text='Descrição dos seus objetivos e trabalhos da ONG', null=True, verbose_name='Descrição da Empresa/ONG')),
            ],
            options={
                'verbose_name': 'Perfil',
                'verbose_name_plural': 'Perfis',
            },
        ),
        migrations.CreateModel(
            name='Avaliacao',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('titulo', models.CharField(blank=True, max_length=110)),
                ('descricao', models.TextField(blank=True)),
                ('nota', models.PositiveSmallIntegerField(choices=[(1, '1 Estrela'), (2, '2 Estrelas'), (3, '3 Estrelas'), (4, '4 Estrelas'), (5, '5 Estrelas')])),
                ('data_avaliacao', models.DateTimeField(auto_now_add=True)),
                ('usuario', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='Dica',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('titulo', models.CharField(max_length=200)),
                ('resumo', models.CharField(help_text='Um resumo curto que aparecerá no card da dica.', max_length=255)),
                ('conteudo', models.TextField(help_text='O conteúdo completo da dica.')),
                ('imagem', models.ImageField(blank=True, null=True, upload_to='dicas/')),
                ('publicada', models.BooleanField(default=True)),
                ('data_publicacao', models.DateTimeField(default=django.utils.timezone.now)),
                ('autor', models.ForeignKey(help_text='O autor da dica.', null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('categoria', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='dicas', to='core.categoriadica')),
            ],
            options={
                'ordering': ['-data_publicacao'],
            },
        ),
        migrations.CreateModel(
            name='Loja',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=100)),
                ('descricao', models.TextField(blank=True)),
                ('data_criacao', models.DateTimeField(auto_now_add=True)),
                ('imagem', models.ImageField(blank=True, null=True, upload_to='lojas/')),
                ('localizacao', models.CharField(max_length=255)),
                ('proprietario', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Loja',
                'verbose_name_plural': 'Lojas',
            },
        ),
        migrations.CreateModel(
            name='EstatisticaVenda',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('total_vendas', models.PositiveIntegerField(default=0)),
                ('receita_total', models.DecimalField(decimal_places=2, default=0.0, max_digits=15)),
                ('loja', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='estatisticas', to='core.loja')),
            ],
        ),
        migrations.CreateModel(
            name='Comentario',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('avaliacao', models.IntegerField(choices=[(1, '1 Estrela'), (2, '2 Estrelas'), (3, '3 Estrelas'), (4, '4 Estrelas'), (5, '5 Estrelas')])),
                ('texto', models.TextField()),
                ('data_criacao', models.DateTimeField(auto_now_add=True)),
                ('aprovado', models.BooleanField(default=True)),
                ('autor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
                ('curtidas', models.ManyToManyField(blank=True, related_name='curtidas', to=settings.AUTH_USER_MODEL)),
                ('loja', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='comentarios', to='core.loja')),
            ],
            options={
                'verbose_name': 'Comentário',
                'verbose_name_plural': 'Comentários',
                'ordering': ['-data_criacao'],
            },
        ),
        migrations.CreateModel(
            name='Notificacao',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo', models.CharField(choices=[('PEDIDO', 'Notificação de Pedido'), ('PROMOCAO', 'Promoção'), ('CUPOM', 'Cupom de Desconto'), ('NOVIDADE', 'Novidade do Sistema/App')], max_length=10, verbose_name='Tipo de Notificação')),
                ('titulo', models.CharField(max_length=255, verbose_name='Título')),
                ('mensagem', models.TextField(verbose_name='Mensagem Completa')),
                ('url_destino', models.CharField(blank=True, max_length=255, null=True, verbose_name='URL de Destino')),
                ('lida', models.BooleanField(default=False, verbose_name='Lida')),
                ('data_criacao', models.DateTimeField(auto_now_add=True, verbose_name='Data de Criação')),
                ('usuario', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notificacoes', to=settings.AUTH_USER_MODEL, verbose_name='Usuário')),
            ],
            options={
                'verbose_name': 'Notificação',
                'verbose_name_plural': 'Notificações',
                'ordering': ['-data_criacao'],
            },
        ),
        migrations.CreateModel(
            name='PedidoVendedor',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('status', models.CharField(choices=[('AGUARDANDO', 'Aguardando Aprovação'), ('EM_PREPARO', 'Em Preparo'), ('A_CAMINHO', 'A Caminho'), ('ENTREGUE', 'Entregue'), ('CANCELADO', 'Cancelado')], default='AGUARDANDO', max_length=20)),
                ('valor_subtotal', models.DecimalField(decimal_places=2, help_text='Valor total dos itens deste vendedor.', max_digits=10)),
                ('pedido_principal', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sub_pedidos', to='core.pedido')),
                ('vendedor', models.ForeignKey(limit_choices_to={'tipo': 'VENDEDOR'}, on_delete=django.db.models.deletion.PROTECT, related_name='pedidos_recebidos', to='core.perfil')),
            ],
            options={
                'verbose_name': 'Vendedor',
                'verbose_name_plural': 'Vendedores',
            },
        ),
        migrations.AddField(
            model_name='pedido',
            name='cliente',
            field=models.ForeignKey(limit_choices_to={'tipo': 'CLIENTE'}, on_delete=django.db.models.deletion.PROTECT, related_name='pedidos', to='core.perfil'),
        ),
        migrations.CreateModel(
            name='Doacao',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('descricao', models.TextField(help_text='Descrição dos itens doados')),
                ('quantidade_doada', models.PositiveIntegerField()),
                ('data_doacao', models.DateTimeField()),
                ('status', models.CharField(choices=[('AGUARDANDO', 'Aguardando Retirada'), ('CONCLUIDA', 'Concluída'), ('CANCELADA', 'Cancelada')], default='AGUARDANDO', max_length=20)),
                ('doador', models.ForeignKey(help_text='Vendedor que está doando', limit_choices_to={'tipo': 'VENDEDOR'}, on_delete=django.db.models.deletion.PROTECT, related_name='doacoes_feitas', to='core.perfil')),
                ('ong', models.ForeignKey(limit_choices_to={'tipo': 'ONG'}, on_delete=django.db.models.deletion.PROTECT, related_name='doacoes_recebidas', to='core.perfil')),
            ],
            options={
                'verbose_name': 'Doacão',
                'verbose_name_plural': 'Doacões',
            },
        ),
        migrations.CreateModel(
            name='Produto',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=100)),
                ('descricao', models.TextField(blank=True)),
                ('preco', models.DecimalField(decimal_places=2, max_digits=10)),
                ('imagem', models.ImageField(blank=True, help_text='Imagem de apresentação do produto', null=True, upload_to='produtos/')),
                ('codigo_produto', models.CharField(blank=True, help_text='Código de barras ou SKU. Deve ser único.', max_length=50, null=True, unique=True, verbose_name='Código do Produto (SKU)')),
                ('data_fabricacao', models.DateField(blank=True, null=True, verbose_name='Data de Fabricação')),
                ('data_validade', models.DateField(blank=True, null=True, verbose_name='Data de Validade')),
                ('quantidade_estoque', models.PositiveIntegerField(default=0)),
                ('ativo', models.BooleanField(default=True)),
                ('data_criacao', models.DateTimeField(auto_now_add=True)),
                ('categoria', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='produtos', to='core.categoria')),
                ('vendedor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='produtos', to='core.perfil')),
            ],
            options={
                'verbose_name': 'Produto',
                'verbose_name_plural': 'Produtos',
            },
        ),
        migrations.CreateModel(
            name='ProdutoVendedor',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=100)),
                ('preco', models.DecimalField(decimal_places=2, max_digits=10)),
                ('imagem', models.ImageField(blank=True, null=True, upload_to='produtos/')),
                ('codigo_produto', models.CharField(max_length=20, unique=True)),
                ('data_fabricacao', models.DateField(blank=True, null=True)),
                ('data_validade', models.DateField(blank=True, null=True)),
                ('quantidade_estoque', models.PositiveIntegerField(default=0)),
                ('descricao', models.TextField(blank=True, null=True)),
                ('ativo', models.BooleanField(default=True)),
                ('categoria', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='produtos_de_vendedores', to='core.categoria')),
            ],
        ),
        migrations.CreateModel(
            name='Receita',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=100)),
                ('descricao', models.TextField(blank=True)),
                ('tempo_preparo', models.PositiveIntegerField(help_text='Tempo em minutos')),
                ('rendimento', models.CharField(help_text="Ex: '8 porções' ou 'Serve 4 pessoas'", max_length=50)),
                ('imagem', models.ImageField(blank=True, help_text='Imagem de apresentação do prato', null=True, upload_to='receitas/')),
                ('data_criacao', models.DateTimeField(default=django.utils.timezone.now)),
                ('disponivel', models.BooleanField(default=True)),
                ('autor', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='receitas_criadas', to=settings.AUTH_USER_MODEL)),
                ('categoria', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='receitas', to='core.categoriareceita')),
            ],
            options={
                'verbose_name': 'Receita',
                'verbose_name_plural': 'Receitas',
            },
        ),
        migrations.CreateModel(
            name='Ingrediente',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=100)),
                ('quantidade', models.CharField(max_length=100)),
                ('receita', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ingredientes', to='core.receita')),
            ],
        ),
        migrations.CreateModel(
            name='EtapaPreparo',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('ordem', models.PositiveIntegerField(help_text='A ordem do passo (1, 2, 3...)')),
                ('descricao', models.TextField()),
                ('receita', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='etapas', to='core.receita')),
            ],
            options={
                'ordering': ['ordem'],
            },
        ),
        migrations.CreateModel(
            name='ItemPedido',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('quantidade', models.PositiveIntegerField(default=1, help_text='Quantidade de unidades do produto neste item.')),
                ('preco_unitario', models.DecimalField(blank=True, decimal_places=2, help_text='Preço do produto no momento da compra. Preenchido automaticamente se deixado em branco.', max_digits=10, null=True)),
                ('sub_pedido', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='itens', to='core.pedidovendedor')),
                ('produto', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='itens_pedidos', to='core.produto')),
            ],
            options={
                'verbose_name': 'Item do Pedido',
                'verbose_name_plural': 'Itens dos Pedidos',
                'unique_together': {('sub_pedido', 'produto')},
            },
        ),
        migrations.CreateModel(
            name='ReceitaAvaliacao',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nota', models.PositiveIntegerField(help_text='Nota de 1 a 5 estrelas', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(5)])),
                ('texto', models.TextField(blank=True, help_text='Escreva um comentário sobre a receita (opcional)', verbose_name='Comentário')),
                ('data', models.DateTimeField(auto_now_add=True)),
                ('autor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='avaliacoes_feitas', to=settings.AUTH_USER_MODEL)),
                ('receita', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='avaliacoes', to='core.receita')),
            ],
            options={
                'ordering': ['-data'],
                'unique_together': {('receita', 'autor')},
            },
        ),
    ]
