{% extends 'global/base.html' %}
{% load static %}

{% block content %}
{% block head %}
  <title>Perfil do Vendedor - {{ vendedor.nome_negocio }}</title>
  <link rel="stylesheet" href="{% static 'core/css/style_vendedor.css' %}">
{% endblock head %}

<div class="loja-container">
  <header class="loja-header">
    {% if vendedor.foto_perfil %}
        <img src="{{ endedor.foto_perfil.url }}" alt="Logo da loja {{ vendedor.nome_negocio }}" class="loja-imagem" />
    {% else %}
        <img src="{% static 'assets/img/placeholder_store.png' %}" alt="Logo da loja {{ vendedor.nome_negocio }}" class="loja-imagem" />
    {% endif %}
    <h1 class="loja-nome">{{ vendedor.nome_negocio }}</h1>
    <p class="loja-localizacao">{{ vendedor.cidade }}, {{ vendedor.estado }}</p>
  </header>

  <section class="perfil-vendedor">
    <h2>Sobre o Vendedor</h2>
    <p>{{ vendedor.descricao_parceiro|default:"Este vendedor ainda não adicionou uma descrição." }}</p>
    <p><strong>Email de contato:</strong> {{ vendedor.usuario.email }}</p>
  </section>

  <section class="produtos-cadastrados">
    <h2>Produtos Cadastrados</h2>
    <ul class="lista-produtos">
      {% for produto in produtos %}
      <li class="produto-item">
        {% if produto.imagem_principal %}
            <img src="{{ produto.imagem_principal.url }}" alt="{{ produto.nome }}" class="produto-imagem" />
        {% else %}
            <img src="{% static 'assets/img/placeholder_produto.png' %}" alt="{{ produto.nome }}" class="produto-imagem" />
        {% endif %}
        <div class="produto-info">
          <h3>{{ produto.nome }}</h3>
          <p>{{ produto.descricao|truncatewords:20|safe }}</p>
          <p class="produto-preco">Preço: R$ {{ produto.preco }}</p>
        </div>
      </li>
      {% empty %}
        <li>Este vendedor ainda não possui produtos cadastrados.</li>
      {% endfor %}
    </ul>
  </section>

  <section class="gerenciamento-loja">
    <h2>Gerenciamento</h2>
    <a href="{% url 'core:cadastrar_produto' %}" class="btn btn-primary">Adicionar Produto</a>
  </section>
</div>
{% endblock content %}