{% load static %}

<header>
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container">
      
      <a class="navbar-brand d-flex align-items-center" href="{% url 'core:index' %}">
        <img src="{% static 'assets/img/logo.png' %}" alt="logo" class="logo me-2" style="height: 40px;" />
        <h1 class="mb-0 fs-4">Aproveite+</h1>
      </a>

      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#menuPrincipal"
        aria-controls="menuPrincipal"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="menuPrincipal">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="{% url 'core:receitas' %}">
              <i class="bi bi-egg-fried me-2"></i> Receitas
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="{% url 'core:videos' %}">
              <i class="bi bi-collection-play me-2"></i> Vídeos
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="{% url 'core:produtos' %}">
              <i class="bi bi-shop-window me-2"></i> Produtos
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="{% url 'core:dicas' %}">
              <i class="bi bi-recycle me-2"></i> Dicas
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link d-flex align-items-center" href="{% url 'core:doacoes' %}">
              <i class="bi bi-box2-heart me-2"></i> Doações
            </a>
          </li>
        </ul>

        <div class="d-flex flex-column flex-lg-row align-items-lg-center gap-3">
          
          <form class="d-flex search-form" role="search" method="get" action="{% url 'core:produtos' %}">
            <div class="input-group">
              <input class="form-control" type="search" placeholder="Pesquisar..." name="termo" aria-label="Search" />
              <button class="btn btn-outline-light" type="submit">
                <i class="bi bi-search"></i>
              </button>
            </div>
          </form>

          <div class="d-flex align-items-center gap-2">
            {% if user.is_authenticated %}
              <a href="{% url 'core:ver_carrinho' %}" class="btn btn-light position-relative me-2">
                <i class="bi bi-cart"></i>
                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="cart-item-count">
                  {{ total_itens|default:0 }}
                </span>
              </a>

              <div class="dropdown">
                <button class="btn btn-outline-light dropdown-toggle d-flex align-items-center text-nowrap" type="button" id="userMenu" data-bs-toggle="dropdown" aria-expanded="false">
                  <i class="bi bi-person-circle me-2"></i>
                  {{ user.username|truncatechars:10 }}
                </button>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userMenu">
                  <li><a class="dropdown-item" href="#">Meu Perfil</a></li>
                  <li><hr class="dropdown-divider"></li>
                  <li>
                    <form action="{% url 'core:logout' %}" method="post" style="display: inline;">
                      {% csrf_token %}
                      <button type="submit" class="dropdown-item text-danger">Sair</button>
                    </form>
                  </li>
                </ul>
              </div>

            {% else %}
              <div class="d-flex gap-2">
                <a href="{% url 'core:login' %}" class="btn btn-outline-light text-nowrap">Login</a>
                <a href="{% url 'core:cadastro' %}" class="btn btn-success text-nowrap">Cadastre-se</a>
              </div>
            {% endif %}
          </div>
        </div>

      </div> </div> </nav>
</header>